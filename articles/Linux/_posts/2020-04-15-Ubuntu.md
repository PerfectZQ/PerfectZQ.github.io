---
layout: post
title: Ubuntu
tag: Linux
---

## Windows 远程连接 Ubuntu ECS
```shell
# 1. === Connect to remote Ubuntu ECS ===
$ sudo apt-get update
$ sudo apt-get upgrade -f
$ sudo apt-get clean

# remove
$ sudo apt-get remove --purge -y vnc4server tightvncserver xrdp xubuntu-desktop

# VNC (Virtual Network Console)
$ sudo apt-get install -y vnc4server tightvncserver
# Install xrdp
$ sudo apt-get install -y xrdp

# Optional: Choose your ubuntu desktop env

# Option 1: xubuntu
$ sudo apt-get install -y xubuntu-desktop
# xrdp doesn't support gnome and unity anymore since ubuntu 13.10, so need xfce4.
$ sudo apt-get install -y xfce4
# config for current user
$ echo "xfce4-session" > ~/.xsession

# Or you could add to this scripts for all users
$ vim /etc/xrdp/startwm.sh
#!/bin/sh
# xrdp X session start script (c) 2015, 2017 mirabilos
# published under The MirOS Licence

if test -r /etc/profile; then
        . /etc/profile
fi

if test -r /etc/default/locale; then
        . /etc/default/locale
        test -z "${LANG+x}" || export LANG
        test -z "${LANGUAGE+x}" || export LANGUAGE
        test -z "${LC_ADDRESS+x}" || export LC_ADDRESS
        test -z "${LC_ALL+x}" || export LC_ALL
        test -z "${LC_COLLATE+x}" || export LC_COLLATE
        test -z "${LC_CTYPE+x}" || export LC_CTYPE
        test -z "${LC_IDENTIFICATION+x}" || export LC_IDENTIFICATION
        test -z "${LC_MEASUREMENT+x}" || export LC_MEASUREMENT
        test -z "${LC_MESSAGES+x}" || export LC_MESSAGES
        test -z "${LC_MONETARY+x}" || export LC_MONETARY
        test -z "${LC_NAME+x}" || export LC_NAME
        test -z "${LC_NUMERIC+x}" || export LC_NUMERIC
        test -z "${LC_PAPER+x}" || export LC_PAPER
        test -z "${LC_TELEPHONE+x}" || export LC_TELEPHONE
        test -z "${LC_TIME+x}" || export LC_TIME
        test -z "${LOCPATH+x}" || export LOCPATH
fi

if test -r /etc/profile; then
        . /etc/profile
        export LANG LANGUAGE
fi

test -x /etc/X11/Xsession && exec /etc/X11/Xsession
exec /bin/sh /etc/X11/Xsession

echo "xfce4-session" > ~/.xsession

# Option 2: xfce4
$ sudo apt-get install -y xfce4
$ echo "xfce4-session" > ~/.xsession

# Start service
$ sudo systemctl enable xrdp
$ sudo systemctl restart xrdp

# Allow xRDP through the local firewall
$ sudo ufw allow 3389/tcp


# 2. === Windows ===
$ Win + R
mstsc
# type Ubuntu's IP
# sesman-Xvnc -> username & password
```