---
layout: post
title: API详解
tag: ElasticSearch
---

## 前言
ElasticSearch的API分为下面几个部分
* API Conventions：API公约
* Document APIs
* Search APIs
* Aggregations
* Indices APIs
* cat APIs
* Cluster APIs
* Query DSL
## API Conventions
　　本章讲述API的公约，来源参考[official reference](https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html)

　　ES允许通过HTTP公开APIs，关于HTTP的设置目前不能动态改变，只能通过设置`elasticsearch.yml`生效。详细的配置参数参考[official reference](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-http.html)
### Multiple Indices
　　大多数引用`index`参数的API支持跨多个索引执行，例如同时对三个索引`index1`、`index2`、`index3`执行查询操作，`GET /index1,index2,index3/_search?q=tag:wow`。`_all`代表所有的索引，除此之外还支持通配符`*`，如`index*`、`in*ex*`。如果只想查询`index1`和`index2`还可以使用`-`排除索引，如`index*,-index3`。

　　所有支持`Multiple Indices`的APIs还支持下面的url查询参数

* `ignore_unavailable`:可以指定为`true`或者`false`。是否需要忽略**不存在**或者**被关闭**的`index`
* `allow_no_indices`:可以指定为`true`或者`false`。如果通配符匹配不到具体的索引，请求是否失败。此设置适用于`*`、`_all`或者不指定索引，也适用于`alias`以防别名指向已经被关闭的索引。
* `expand_wildcards`:可以指定为`open`、`closed`、`open,closed`、`all`、`none`。指定通配符要匹配哪些状态的索引。`open`是只匹配打开状态的索引，`closed`是只匹配关闭状态的索引，`open,closed`等同于`all`，匹配所有状态的索引，`none`表示关闭通配符。

　　这些参数的默认值取决于使用他们的API

> 单索引APIs(Single index APIs)，例如`Document APIs`和`single-index alias APIs`是不支持`Multiple Indices`特性的。

### Date math support in index names
　　索引名称支持日期表达式

## Document APIs
## Search APIs
## Aggregations
## Indices APIs
## cat APIs
## Cluster APIs
## Query DSL
